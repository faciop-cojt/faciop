(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{262:function(t,e,r){(function(t){function r(t,e){for(var r=0,i=t.length-1;i>=0;i--){var n=t[i];"."===n?t.splice(i,1):".."===n?(t.splice(i,1),r++):r&&(t.splice(i,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function filter(t,e){if(t.filter)return t.filter(e);for(var r=[],i=0;i<t.length;i++)e(t[i],i,t)&&r.push(t[i]);return r}e.resolve=function(){for(var e="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var path=i>=0?arguments[i]:t.cwd();if("string"!=typeof path)throw new TypeError("Arguments to path.resolve must be strings");path&&(e=path+"/"+e,n="/"===path.charAt(0))}return(n?"/":"")+(e=r(filter(e.split("/"),(function(p){return!!p})),!n).join("/"))||"."},e.normalize=function(path){var t=e.isAbsolute(path),o="/"===n(path,-1);return(path=r(filter(path.split("/"),(function(p){return!!p})),!t).join("/"))||t||(path="."),path&&o&&(path+="/"),(t?"/":"")+path},e.isAbsolute=function(path){return"/"===path.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(filter(t,(function(p,t){if("string"!=typeof p)throw new TypeError("Arguments to path.join must be strings");return p})).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var o=n(t.split("/")),l=n(r.split("/")),c=Math.min(o.length,l.length),f=c,i=0;i<c;i++)if(o[i]!==l[i]){f=i;break}var h=[];for(i=f;i<o.length;i++)h.push("..");return(h=h.concat(l.slice(f))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(path){if("string"!=typeof path&&(path+=""),0===path.length)return".";for(var code=path.charCodeAt(0),t=47===code,e=-1,r=!0,i=path.length-1;i>=1;--i)if(47===(code=path.charCodeAt(i))){if(!r){e=i;break}}else r=!1;return-1===e?t?"/":".":t&&1===e?"/":path.slice(0,e)},e.basename=function(path,t){var e=function(path){"string"!=typeof path&&(path+="");var i,t=0,e=-1,r=!0;for(i=path.length-1;i>=0;--i)if(47===path.charCodeAt(i)){if(!r){t=i+1;break}}else-1===e&&(r=!1,e=i+1);return-1===e?"":path.slice(t,e)}(path);return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},e.extname=function(path){"string"!=typeof path&&(path+="");for(var t=-1,e=0,r=-1,n=!0,o=0,i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(47!==code)-1===r&&(n=!1,r=i+1),46===code?-1===t?t=i:1!==o&&(o=1):-1!==t&&(o=-1);else if(!n){e=i+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===e+1?"":path.slice(t,r)};var n="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(65))},270:function(t,e,r){"use strict";r.r(e);r(56);var n,o=r(20),l=(r(14),r(262)),c=r.n(l),f=r(74),h=r.n(f),d={head:function(){return{title:"3Dデータ入稿"}},data:function(){return{file:[],loading:!1}},methods:{validateType:function(t){var e;try{e=c.a.extname(t.name)}catch(t){console.log(t)}".gltf"===e||".glb"===e?this.$refs["submit-btn"].disabled=!1:(alert("ファイルの形式が間違ってそう\n               直してね"),this.$refs["submit-btn"].disabled=!0)},upload:(n=Object(o.a)(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,(r=new FormData).append("goodid",e),r.append("data",this.file),t.next=7,h.a.post("https://faciop-api.herokuapp.com/api/v1/model/",r,{headers:{"content-type":"multipart/form-data",Accept:"*/*"}}).then((function(t){if(200==t.status)return!0})).catch((function(t){return alert("ファイル入稿通信時エラー"),!1}));case 7:n=t.sent,console.log(n),n?this.$router.push("/good?dp=".concat(e),(function(){})):(this.loading=!1,alert("エラー"));case 10:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}},v=r(26),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-overlay",{attrs:{show:t.loading,rounded:"sm"}},[r("div",{staticClass:"container"},[r("h1",[t._v("3Dデータの入稿")]),t._v(" "),r("div",{staticClass:"debug"},[t._v("ID: "+t._s(t.$route.query.dp))]),t._v(" "),r("div",{staticClass:"form-group"},[r("b-form-file",{ref:"file-input",attrs:{id:"file-large",state:Boolean(t.file),placeholder:"3Dデータを選択(.gltf, .glb)",accept:".gltf, .glb"},on:{input:t.validateType},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),t._v(" "),r("b-button",{ref:"submit-btn",attrs:{variant:"primary",disabled:""},on:{click:function(e){return t.upload(t.$route.query.dp)}}},[t._v("\n        アップロード！\n      ")])],1),t._v(" "),r("b-button",{staticClass:"mb-4",attrs:{variant:"outline-secondary",to:{path:"/good",query:{dp:t.$route.query.dp}}}},[t._v("←商品詳細に戻る")])],1)])}),[],!1,null,"1bd5ffc0",null);e.default=component.exports}}]);